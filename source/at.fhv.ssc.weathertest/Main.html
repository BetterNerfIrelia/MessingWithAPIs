<!DOCTYPE html>
<html lang="en">
<head>
    <title>Weather</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>

        function getJSON() {
            $.getJSON("http://api.openweathermap.org/data/2.5/weather?q=Dornbirn&units=metric&APPID=b8cc30f4d3861fdd45ffb03e7c8dc4aa\n", function (json) {
                var call = (JSON.stringify(json));
                getTemperature(call);
                getDescription(call);
                getIcon(call);
                getResult(call);
            });
        }

        //TODO: Refactor with RegEx.
        function getTemperature(string) {
            var temp = string.search(("temp"));
            var pressure = string.search(("pressure"));

            var temperature =  string.substring(temp +6, pressure -2);
            document.getElementById("temperature").innerHTML = "Temperatur: " + temperature + " Grad";
        }

        function getDescription(string) {
            var desc = string.search(("description"));
            var icon = string.search(("icon"));

            var description =  string.substring(desc +14, icon -3);
            document.getElementById("description").innerHTML = "Description: " + description;
        }

        function getIcon(string){
            var ico = string.search(("icon"));

            var icon = string.substring(ico+7, ico+10);
            var url = "http://openweathermap.org/img/w/" + icon + ".png";
            document.getElementById("icon").src =url;
        }

        function getResult(string) {
            document.getElementById("result").innerHTML = "Hose: Lange Hose"
        }

    </script>
</head>
<body>
<button id="getIt" onclick="getJSON()">Get JSON</button>
<p id="temperature"></p>
<p id="description"></p>
<img id="icon" src="" width="50px"><img>
<p id="hose"></p>
<p id="result"></p>
</body>
</html>


<!--

-----TEMP-----
n < 20.00

-----DESCRIPTION-----
clear sky SHORT
few clouds SHORT
scattered clouds SHORT
broken clouds LONG
shower rain LONG
rain LONG
thunderstorm LONG
snow LONG
mist LONG

-->